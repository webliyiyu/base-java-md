# MySQL

## **配置：**

* **服务启动：**
  * 使用管理员打开cmd  
  * net start mysql：启动mysql的服务
  * net stop mysql：关闭mysql的服务
* **登入：**
  * mysql -uroot -p密码
* **退出：**
  * exit
  * quit



|       数据库       |            存储数据的仓库，数据是有组织的进行存储            |           DataBase（DB）            |
| :----------------: | :----------------------------------------------------------: | :---------------------------------: |
| **数据库管理系统** |                  操纵和管理数据库的大型软件                  | DataBase Management System （DBMS） |
|      **SQL**       | 操作关系型数据库的编程语言，定义了一套操作关系型数据库统一标准 |  Structured Query Language（SQL）   |

## 关系型数据库（RDBMS）

### 概念：

* 建立在关系模型基础上，由多张相互连接的二维表组成的数据库

### 特点：

* 使用表存储数据，格式统一，便于维护
* 使用SQL语言操作，标准统一，便于方便





## SQL

### **概念：**

Structured Query Language：操作关系型数据库的编程语言，是一套标准

其实就是定义了操作所有关系型数据库的规则，每一种数据库操作的方式存在不一样

### **通用语法：**

SQL语句可以单行或多行书写，以分号结尾

MySQL数据库的SQL语句不区分大小写 关键字建议大写

注释：

​	单行注释：-- 注释内容 	# 注释内容

​	多行注释：/* 注释内容 */

### 分类

* **DDL**（Data Definition Language）**数据定义语言**
  * 用来定义数据库对象：数据库，表，列，字段等	关键字：create，drop，alter等
* **DML**（Data Manipulation Language）**数据操作语言**
  * 用来对数据库中表的数据进**行增删改**	关键字：insert，delete，update等
* **DQL**（Data Query Language）**数据查询语言**
  * 用来**查询**数据库中表的记录（数据）	关键字：select，where等
* DCL（Data Control Language）数据控制语言（了解）
  * 用来定义数据库的访问权限和安全级别，及创建用户	关键字：GRANT，REVOKE等

![image-20240306154410414](image-20240306154410414.png)



### DDL

**定义数据库对象：数据库，表，列，字段等**

#### **数据库操作**

![image-20240306162755470](image-20240306162755470.png)

#### **表操作-查询**

![image-20240306170142798](image-20240306170142798.png)

#### **表操作-创建**

![image-20240306171028557](image-20240306171028557.png)

#### **数据类型**

![image-20240307003607923](image-20240307003607923.png)



![image-20240307004302250](image-20240307004302250.png)

#### 表操作-修改

![image-20240307005036084](image-20240307005036084.png)

![image-20240307005056179](image-20240307005056179.png)

![image-20240307005345573](image-20240307005345573.png)

![image-20240307005644180](image-20240307005644180.png)

![image-20240307010133436](image-20240307010133436.png)



#### **总结**

| DDL-数据库操作                                        |                      |
| ----------------------------------------------------- | -------------------- |
| SHOW DATABASES;                                       | 查询所有数据库       |
| SELECT DARABASE();                                    | 查询当前数据库       |
| CREATE DATABASE 数据库名;                             | 创建数据库           |
| USE 数据库名;                                         | 使用数据库           |
| DROP DATABASE 数据库名；                              | 删除                 |
|                                                       |                      |
| **表操作**                                            |                      |
| SHOW TABLES;                                          | 查询当前数据库所有表 |
| CREATE TABLE 表名 （字段 字段类型，字段 字段类型）;   | 创建                 |
| DESC 表名;                                            | 查询表结构           |
| SHOW CREATE TABLE 表名;                               | 查询指定表的建表语句 |
| ALTER TABLE 表名 ADD/MODIFY/CHANGE/DROP/RENAME TO...; | 增修改               |
| DROP TABLE 表名;                                      | 删除表               |



### DML

**对数据库中的表数据进行增、删、改**

#### 添加数据

**注意：**

* 插入数据时，指定的字段顺序需要与值的顺序一一对应
* 字符串和日期型数据应该包含在引导中
* 插入的数据大小，应该在字段的规定范围内

![image-20240307100853554](image-20240307100853554.png)

#### 修改数据

**注意：**

* **修改语句的条件可以有，也可以没有**
* **如果没有条件，则会修改整张表的所有数据**

![image-20240307110927186](image-20240307110927186.png)

#### 删除数据

**注意：**

* DELETE语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的所有数据
* DELETE语句不能删除某

![image-20240307111212114](image-20240307111212114.png)

#### **总结**

| INSERT INTO 表名（字段1，字段2，.....）VALUES（值1，值2，.....）【，（值1，值2，.....）....】; | 添加数据     |
| ------------------------------------------------------------ | ------------ |
| UPDATE 表名 SET 字段1=值1，字段2=值2【WHERE 条件】；         | **修改数据** |
| DELETE EROM 表名【WHERE 条件】；                             | **删除数据** |



### DQL

**查询数据库中的表的记录**

![image-20240307144007604](image-20240307144007604.png)



#### 基本查询

![image-20240307143225826](image-20240307143225826.png)



#### 条件查询

![image-20240307145235904](image-20240307145235904.png)



#### 聚合函数

**介绍：**

* 将一列数据作为一个整体，进行纵向计算

**常见聚合函数：**

| 函数  | 功能     |
| ----- | -------- |
| count | 统计数量 |
| max   | 最大值   |
| min   | 最小值   |
| avg   | 平均值   |
| sum   | 求和     |



![image-20240307145437597](image-20240307145437597.png)



#### 分组查询

![image-20240307155109571](image-20240307155109571.png)

**where和having区别：**

* 执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤
* 判断条件不同：where不能对聚合函数进行判断，而having可以

**注意：**

* **执行顺序**：where > 聚合函数 > having
* **分组之后**，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义



#### 排序查询

![image-20240307162102075](image-20240307162102075.png)

**排序方式：**

**ASC**：升序（默认值）

**DESC**：降序

**注意：**

如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序



#### 分页查询

![image-20240307162512200](image-20240307162512200.png)

**注意：**

* 起始索引从0开始，起始索引=（查询页码-1） * 每页显示记录数
* 分页查询时数据库的方言，不同的数据库有不同的实现，MySQL中是LIMIT
* 如果查询的是第一页数据，起始索引可以省略，直接简写limit 10

#### 执行顺序

![image-20240307164226748](image-20240307164226748.png)

#### 总结

![image-20240307164818137](image-20240307164818137.png)



### DCL

**用来管理数据库 用户、控制数据库的访问 权限**

#### 管理用户

![image-20240307172339990](image-20240307172339990.png)



#### 权限控制

![image-20240307172713891](image-20240307172713891.png)

![image-20240307172750901](image-20240307172750901.png)

## 函数

**指一段可以直接被另一段程序调用的程序或代码**

### 字符串函数

![image-20240311155958291](image-20240311155958291.png)



**演示：**selsct concat（‘hello’,'mysql'）



### 数值函数

![image-20240311160910879](image-20240311160910879.png)





### 日期函数

![image-20240311161436176](image-20240311161436176.png)



### 流程函数

![image-20240311162347038](image-20240311162347038.png)

**注意：**

`IFNULL`函数用于判断第一个参数是否为NULL。如果为NULL，则返回第二个参数的值；如果不为NULL，包括空字符串在内，则返回第一个参数的值

![image-20240311163512331](image-20240311163512331.png)



## 约束

#### 概念：

* 约束是作用于表中字段上的规则，用于限制存储在表中的数据

#### 目的：

* 保证数据库中数据的正确、有效性和完整性

#### 分类：

![image-20240311163900852](image-20240311163900852.png)



**练习：**

![image-20240311172718754](image-20240311172718754.png)

![image-20240311172841015](image-20240311172841015.png)

#### 注意：

* 约束是作用于表中字段上的，可以在创建表/修改表的时候添加约束



#### 外键约束

**概念：**外键用来让两张表的数据之间建立链接，从而保证数据的一致性和完整性

![image-20240311174518305](image-20240311174518305.png)

![image-20240311175322145](image-20240311175322145.png)

级联删除和更新是**通过外键约束实现的**，以确保数据的一致性。具体如下：

- **级联删除（Cascade Delete）**：当你在父表中删除一条记录时，所有子表中与之关联的记录也会被自动删除。例如，如果你从`stu`表（假设它是父表）中删除了id为2的学生记录，那么在`sc`表（假设它是子表）中与该学生相关的成绩记录也会被删除。
- **级联更新（Cascade Update）**：当你在父表中更新一条记录时，子表中与之关联的记录也会自动更新。例如，如果在`stu`表中将id为3的学生更改为id为6，那么在`sc`表中与该学生对应的id也会相应地更新。

需要注意的是，为了实现级联删除和更新，你需要在创建表时定义外键约束，并指定`ON DELETE CASCADE`或`ON UPDATE CASCADE`选项。这样，当主表中的数据发生变化时，相关联的子表中的数据也会按照指定的级联操作进行相应的更改。

## 多表查询





## 事物



